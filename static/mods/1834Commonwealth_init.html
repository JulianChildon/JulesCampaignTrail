var hasMusic = false;
e = campaignTrail_temp;

HistHexcolour=["#0078ff","#ffb300","#9f0093","#006939"];
HistName=[" Henry Clay"," John Calhoun"," John Quincy Adams","Parti Catholique"];
HistEV=[133,91,18,0];
HistPV=["686,000","620,000","203,000","52,000"];
HistPVP=["43.9%","39.7%","13%","3.34%"];

function replaceFurtherReading() {
  // Get the button element
  try {
    const recReadingButton = document.getElementById('recommended_reading_button');

    // Add a click event listener to the button
    recReadingButton.addEventListener('click', function() {
      const mainContent = document.getElementById("main_content_area_reading");
      if (mainContent) {
        mainContent.innerHTML = `
          <h3 class="results_tab_header">Further Reading</h3>
          <div id="recommended_reading_box" style="overflow-y:scroll;height:357.133px;font-size:1em;text-align: left;">
            <h1>Come join us in <a href="https://discord.gg/dFRse4H7kg">Commonwealthcord!</a></h1>
The First Party System was the political party system in the American Commonwealth beginning in 1784.[1] It featured three opposed political parties competing for control of the Lord Protectorship and Parliament; the Federalists, founded by anti-treaty activist Thomas Paine, the Tories, a party founded by industrialists and pro-treaty politicians lead by John Jay, and the Whigs, a party created by political giant Benjamin Franklin.
<br></br> The Whigs founded the first government under Patrick Henry and Franklin, and the Whigs and Tories proceeded to have multiple competitive elections before the Tories settled into dominance after the election of Lord Protector Rufus King. By 1800, politics in every state were monopolized by the two parties, outside of New England, where the Federalists continued to compete, and Canada, where minor Canadien sovereigntist parties continued to have influence.[2]
<br></br> The Tories supported the Special Relationship with the British Commonwealth, a tariff to fund internal improvements, a national bank, manifest destiny rhetoric against the Kingdom of Spain, and enlargement of industry.[3] Tory supporters would generally be drawn from urban populations in the Mid-Atlantic, landowners and industrialists across the country, and western settlers. Religiously, the Tories were dominated by Congregationalists, and remained heavily opposed to expansion of the rights of minority religious populations.
<br></br> The Whigs, based in the plantation South, opposed strong executive power and supported the rights of states. They were opposed to the Tory financial program, instead believing in a reduction of tariffs and free trade outside of the Special Relationship’s preferential system. Whig supporters would be drawn from Southerners, immigrants, reformers, and Canadiens.[4]Religiously, the Whigs were the most varied of the three major parties, with Catholic machines in the mid-Atlantic and Canada providing strong support, while a majority of Whiggish leadership would be Southern Anglican. The Whigs supported religious matters being delegated to the states, but remained equally interested in war against the Catholic Spaniards as the Tories. <br></br> The Federalists were at this point a minor force in national politics, despite being the oldest party. The Federalists supported stronger tariffs, a centralized and empowered central government, an end to the Special Relationship, and included factions opposed to the institution of slavery. Generally Federalists would vote alongside Tory administrations on most economic matters, outside of tariffs. Federalists would generally draw the support of protestant urbanites in the northeast, especially in New England.[5]
<br></br> Major swing states of the first party system would include New York, Pennsylvania, Saint James, Massachusetts, and Pennsylvania. Most other states were stratified in their political alignments, the outcome of most elections would often rely on the few Atlantic swing states, with Saint James in particular having a disproportionate influence over Parliament and the Lord Protectorate.
<br></br> The date of the end of the first party system is disputed, but it is generally agreed to…

          </div>`;
      }
    });
  } catch {}
}
window.setInterval(replaceFurtherReading,200)

next0 = function() {
    const imageElement = document.querySelector('#election_image img');
    imageElement.setAttribute('src', 'https://i.imgur.com/yMI6k1r.png');
    text = "We have a tendency to abbreviate this as a “Cromwell wins” timeline, but Cromwell won in real life! However, his son was deposed swiftly and the Kingdom restored. In the timeline of Commonwealth, a concerned cabre of military generals of the New Model Army, specifically, John Lambert and John Lilburne do not believe that Richard Cromwell can continue the reign of Cromwellian England. Terrified of a collapse and facing exile, they staged an assassination of Oliver Cromwell on the most holy of days, October 31st, swiftly blaming it on Catholic resistance, solidifying the state. <br></br> In America, Puritan assemblies were encouraged by the power of the new Lord Protector, John Lambert, due to their intense loyalty towards Cromwell and his state. In the North, a largely Calvinist church faction soon formed the Congregational Association, a key voter block in the North. In the South, with its ties towards the old English nobility, many landed gentry fled to St. James and North Fairfax, bringing with them Anglicanism stationed with the Archbishop of Charleston.<br><button onclick='back0()'>Back</button><button onclick='next1()'>Next</button></br>"
    document.getElementById("election_summary").innerHTML = text
}
next1 = function() {
    const imageElement = document.querySelector('#election_image img');
    imageElement.setAttribute('src', 'https://i.imgur.com/yMI6k1r.png');
    text = "Major American success in the French-Indian war, as well as closer English cultural and religious ties, generated domestic English interest in American independence, but the possibility of a sovereign nation-state costing America her cotton supply, an ever-profitable revenue, generated an agreement: one in which the Commonwealth of America maintained low-tariff rates of trade with England, and exclusively England, in exchange for nominal independence. Ratification was a public debate, but eventually leaned on side of the passage. <br></br> With the Federalists formed to protest the treaty with England, the Whigs to protect Southern interests and free trade, and the Tories to represent Congregationalism, internal improvements, and high tariffs, the first election was set in 1784.<br><br><br><button onclick='next0()'>Back</button></br></br></br>"
    document.getElementById("election_summary").innerHTML = text
}
back0 = function() {
     const imageElement = document.querySelector('#election_image img');
              imageElement.setAttribute('src', 'https://i.imgur.com/cr3nrr3.jpeg');
    text = "With the assumed third term of Lord Protector James Monroe underway, the Tory Machine seems as empowered as ever. Strong support in Saint James, New York, and the West only rivaled by the growing popularity of Senator Jackson and his ilk of Whigs. <br></br>And yet, within every smile of the Grand Protector lays the hidden pain of age, the agony of decay.\n\nHe is not long for this world. He knows that he will have to leave his brash, arrogant Prime Minister, Henry Clay, the title he has so carefully constructed in an election of most unusual circumstances.<br></br>He does not believe he can defend it. <br></br> A timeline based on an empowered Cromwellian Regime resulting in a widespread glorification of Cromwell as well as a heavily religious, Parliamentarian America.<br><button onclick='next0()'>Next</button>"
    document.getElementById("election_summary").innerHTML = text
}
back1 = function() {
     const imageElement = document.querySelector('#election_image img');
              imageElement.setAttribute('src', 'https://i.imgur.com/cr3nrr3.jpeg');
    text = "With the assumed third term of Lord Protector James Monroe underway, the Tory Machine seems as empowered as ever. Strong support in Saint James, New York, and the West only rivaled by the growing popularity of Senator Jackson and his ilk of Whigs. <br></br>And yet, within every smile of the Grand Protector lays the hidden pain of age, the agony of decay.\n\nHe is not long for this world. He knows that he will have to leave his brash, arrogant Prime Minister, Henry Clay, the title he has so carefully constructed in an election of most unusual circumstances.<br></br>He does not believe he can defend it. <br></br> A timeline based on an empowered Cromwellian Regime resulting in a widespread glorification of Cromwell as well as a heavily religious, Parliamentarian America.<br><br><button onclick='next0()'>Next</button>"
    document.getElementById("election_summary").innerHTML = text
}

campaignTrail_temp.global_parameter_json = [
    {
        "model": "campaign_trail.global_parameter",
        "pk": 1,
        "fields": {
            "vote_variable": 1.125,
            "max_swing": 0.12,
            "start_point": 0.94,
            "candidate_issue_weight": 10,
            "running_mate_issue_weight": 3,
            "issue_stance_1_max": -0.71,
            "issue_stance_2_max": -0.3,
            "issue_stance_3_max": -0.125,
            "issue_stance_4_max": 0.125,
            "issue_stance_5_max": 0.3,
            "issue_stance_6_max": 0.71,
            "global_variance": 0.01,
            "state_variance": 0.005,
            "question_count": 25,
            "default_map_color_hex": "#C9C9C9",
            "no_state_map_color_hex": "#999999"
        }
    }
]

campaignTrail_temp.election_json = [
    {
        "model": "campaign_trail.election",
        "pk": 20,
        "fields": {
            "year": 1834,
            "display_year": "1834Commonwealth",
            "summary": "With the assumed third term of Lord Protector James Monroe underway, the Tory Machine seems as empowered as ever. Strong support in Saint James, New York, and the West only rivaled by the growing popularity of Senator Jackson and his ilk of Whigs. <br></br>And yet, within every smile of the Grand Protector lays the hidden pain of age, the agony of decay.\n\nHe is not long for this world. He knows that he will have to leave his brash, arrogant Prime Minister, Henry Clay, the title he has so carefully constructed in an election of most unusual circumstances.<br></br>He does not believe he can defend it. <br></br> A timeline based on an empowered Cromwellian Regime resulting in a widespread glorification of Cromwell as well as a heavily religious, Parliamentarian America.<br><button onclick='next0()'>Next</button>",
            "image_url": "https://i.imgur.com/cr3nrr3.jpeg",
            "winning_electoral_vote_number": 270,
            "advisor_url": "https://i.imgur.com/k2Tiujr.jpeg",
            "recommended_reading": "<ul>\n<li><a href=https://www.chicagotribune.com/opinion/editorials/ct-edit-chicago-tribune-biden-endorsement-20200925-lnyxsb5qvrftnjjmj3rnzj33jy-story.html>Our Case For Joe Biden</a></li>\n<li><a href=https://nationalinterest.org/feature/case-trump-166808>The Case For Trump</a></li>\n<li><a href=https://www.npr.org/2020/11/18/935730100/how-biden-won-ramping-up-the-base-and-expanding-margins-in-the-suburbs>How Biden Won: Ramping Up The Base And Expanding Margins In The Suburbs</a></li>\n<li><a href=https://www.prospectmagazine.co.uk/politics/donald-trump-joe-biden-us-election-almost-win-votes-concede>Why Did Trump Almost Win?</a></li>\n<li><a href=https://www.hoover.org/research/no-evidence-voter-fraud-guide-statistical-claims-about-2020-election>No Evidence For Voter Fraud: A Guide To Statistical Claims About The 2020 Election</a></li>\n</ul>",
            "has_visits": 0,
            "no_electoral_majority_image": "../static/images/2012-no-majority.jpg"
        }
    }
]

campaignTrail_temp.modBoxTheme = {
     "header_color": "#201e20",
     "header_text_color": "#fbfbfb",
     "description_text_color": "#000000",
     "description_background_color": "#dddde1",
     "main_color": "#dfdee0",
     "secondary_color": "#474849",
     "ui_text_color": "#FFFFFF"
}


campaignTrail_temp.temp_election_list = [
    {
        "id": 20,
        "year": 1834,
        "is_premium": 0,
        "display_year": "1834Commonwealth"
    }
]

campaignTrail_temp.credits = "Anasim mod team wow"

campaignTrail_temp.candidate_json = [
    {
        "model": "campaign_trail.candidate",
        "pk": 200,
        "fields": {
            "first_name": "Henry",
            "last_name": "Clay",
            "election": 20,
            "party": "Tory",
            "state": "Kentucky",
            "priority": 1,
            "description": "Pompey Magnus, Marcus Lepidus, Cicero. The second place, a man of ill-fortune who desires to sit upon high. In that long and storied tradition starting from the days of Carthage against Rome and continuing unto now, the scion is Henry Clay.<br></br>Henry Clay is a quixotic figure in the Tory party, a man born outside of the pomerium who desires to rule Rome. He speaks and his origins are laid bare: A poor man from the outskirts of society who transformed himself into a politician of great skill. He is an outsider who holds more repute than most insiders.<br></br>As Prime Minister, he is the Mark Antony to James Monroe\'s Caesar, an understudy of great loyalty but little repute to show for it; the man to get his hands dirty in parliament while his overseer remains blissfully well-kept, no dirt under the nails. Now though, in the last days of Monroe\'s leadership, the Tory party falls to him. Clay will have to struggle with the knowledge that he cannot simply backroom politic his way into high office, as well as the agonizing realization that when asked \"why Clay?\", the average Tory would only reply \"well, who else?\".",
            "color_hex": "#0078ff",
            "secondary_color_hex": null,
            "is_active": 1,
            "image_url": "https://d2rcltyodjzmvo.cloudfront.net/wp-content/uploads/2021/03/13212142/RR-1982.0083_01.jpg",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 201,
        "fields": {
            "first_name": "Andrew",
            "last_name": "Jackson",
            "election": 20,
            "party": "Turbo Team",
            "state": "Tennessee",
            "priority": 1,
            "description": "<p>Put description here</p>",
            "color_hex": "#ffb300",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/candidateexample.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 202,
        "fields": {
            "first_name": "John Quincy",
            "last_name": "Adams",
            "election": 20,
            "party": "Federalists",
            "state": "Massachusetts",
            "priority": 1,
            "description": "<p>Put description here</p>",
            "color_hex": "#9f0093",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/candidateexample.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 203,
        "fields": {
            "first_name": "Parti",
            "last_name": "Catholique",
            "election": 20,
            "party": "Parti Catholique",
            "state": "Canada",
            "priority": 1,
            "description": "<p>Put description here</p>",
            "color_hex": "#006939",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/candidateexample.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    },
	{
        "model": "campaign_trail.candidate",
        "pk": 204,
        "fields": {
            "first_name": "The",
            "last_name": "Tories",
            "election": 20,
            "party": "Tory",
            "state": "The United States",
            "priority": 1,
            "description": "<p>if you see this there is an error please tell ana or max or somebody</p>",
            "color_hex": "#0000FF",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://i.imgur.com/okWigo7.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": "<p>The second oldest party in the Commonwealth, the Tories have held absolute political dominance. Henry Clay enters a long chain of 6 prior Lord Protectoral elections, seeking to continue the dominance of the party. <br></br> The Tories split into three wings: The Congregationalists, hardline Calvinists who favor a national religion and nativism. The Southern Tories, who support free trade, slavery, and limitation on banking and internal improvements. The Machine Men, who are engaged in a nation-wide corruption scheme to benefit from the glorious...subsidies of the British industrialists who purchase American cotton en masse. Henry Clay must unite all three to survive. </p>",
            "candidate_score": 1,
            "running_mate": true
        }
    }
]

campaignTrail_temp.running_mate_json = [
	{"model":"campaign_trail.running_mate","pk":1834,"fields":{"candidate":200,"running_mate":204}}	
]

campaignTrail_temp.opponents_default_json = [
    {
        "election": 20,
        "candidates": [
            200,
            201,
            202,
            203
        ]
    }
]

campaignTrail_temp.opponents_weighted_json = [
    {
        "election": 20,
        "candidates": [
            200,
            201,
            202,
            203
        ]
    }
]

jet_data = {
    "headerColor": "#000000",
    "windowColor": "#ffffff",
    "containerColor": "#FFFFFF",
    "innerWindowColor": "#ffffff",
    "bannerImageUrl": "https://jetsimon.com/public/placeholderbanner.png",
    "backgroundImageUrl": "https://coolbackgrounds.io/images/backgrounds/white/pure-white-background-85a2a7fd.jpg",
    "endingTextColor": "#000000",
    "customQuote": "\"Liberty does not exist where rights are on one side and power on the other.\"",
    "gameTitle": "Commonwealth 1834: Cincinnatus"
}

//#startcode


corrr = '\n              <h2>Commonwealth 1834: Cincinnatus</h2><font id="wittyquote" size="4" color="white"><em>"Liberty does not exist where rights are on one side and power on the other."</em></font>\n            ';


nct_stuff.themes[nct_stuff.selectedTheme].coloring_title = "#000000";

nct_stuff.themes[nct_stuff.selectedTheme].coloring_window = "#ffffff";

document.getElementsByClassName("game_header")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_title;

$("#game_window")[0].style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_window;

$(".container")[0].style.backgroundColor = "#FFFFFF";

document.getElementById("header").src = "https://i.imgur.com/hdrm2Fp.png";

document.body.background = "https://coolbackgrounds.io/images/backgrounds/white/pure-white-background-85a2a7fd.jpg";

document.head.innerHTML += "<style>#results_container {color:#000000;} .inner_window_w_desc {background-color:#ffffff!important;}</style>";

var changeGameDisp = (hide) => {
  disp = "";
  if (hide) {
    disp = "none";
  }
  document.getElementsByClassName("inner_window_w_desc")[0].style.display = disp
};

e.creditsPage = () => {
  credits_html = `
    <h3>CREDIT TO:</h3>
    <p>2000N and 2021DE and 2008SB
	<p>2000N for the soundtrack system and the credits button
	<p>2016ND for a lot of stuff (which it stole from other things)
	<p>1498Florence for the code1 button thing
    <h3>CODING:</h3>
    <p><font color='#BD33A4'>Ana</font></p>
    <p><font color='#CD59FF'>Max</font></p>
    <h3>WRITING:</h3>
    <p><font color='#84FF84'>Ana</font></p>
	<p><font color='#FF0000'>Mars</font></p>
	<h3>MAP:</h3>
	<p><font color='##FFFF00'>Revan</font></p>
	<p><font color='#53E6F5'>Diamondy</font></p>
	<h3>BANNER:</h3>
    <p><font color='#B87333'>Dino</font></p>
    <h3>HELP OF VARIOUS SORTS</h3>
	<p><font color='#93D0FB'>Rubix</font></p>
	<p><font color='#BA3F0F'>Onkel Danny</font></p>
    <h3>A BUNCH OF THE PORTRAITS</h3>
    <p><font color='#20C1A3'>US Congress and public domain artwork!</font></p>
    <h3>NOTE FROM THE CREATOR:</h3>
    <p><font color='#D3BC8D'>Thank you for playing Commonwealth!! Check out the further reading for a secret and also a brief overview of Commonwealth lore!</font></p>
  `
  changeGameDisp(true);
  var spacer = document.createElement("sisar_gorcia_will_travel_back_in_time_and_win_the_2020_mod_just_you_wait");
  spacer.innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";
  document
    .getElementsByClassName("inner_window_w_desc")[0]
    .children[1].appendChild(spacer);
    changeGameDisp(true);
    var menuHeader = document.createElement("div");
    menuHeader.classList.add("inner_window_front");
    menuHeader.innerHTML = `<h1 style='font-family: "Times New Roman";'><font color='#FFFFFF'>CREDITS</font></h1>`;
    menuHeader.id = "SOTUheader";
    menuHeader.style = "height: 50px;background-color:#5F2126";
    var newMenu = document.createElement("div");
    newMenu.classList.add("inner_window_front");
    newMenu.id = "SOTUmenu";
    newMenu.style = `height:260px;background-color:#2d2d2d;color:white;overflow-y: scroll;`;

    newMenu.innerHTML = credits_html;
    let z = document.getElementById("game_window");
    var backButton = document.createElement("button");
    backButton.style =
      "position: relative; bottom: -13px; left: -380px; width: 150px; height: 80px;font-size:40px;padding-top:5px;padding-left:8px";
    backButton.id = "backSOTUBtn";
    backButton.innerHTML = `<b>BACK</b>`;
    backButton.onclick = function () {
      document.getElementById("SOTUheader").remove();
      document.getElementById("SOTUmenu").remove();
      document.getElementById("backSOTUBtn").remove();
      changeGameDisp(false);
    };
    z.appendChild(menuHeader);
    z.appendChild(newMenu);
    z.appendChild(backButton);

}

e.credits = "<button onclick='e.creditsPage()'>Commonwealth Mod Team</button>"

$("#game_start").click((event) => {
    event.preventDefault();
    musicMode()  
  })
  
  // MUSIC MODE
  
  musicMode = () => {
    // Initialise custom music
  
    $("#music_player")[0].children[0].style.display = "none"
    $("#music_player")[0].children[1].style.display = "none"
  
    document.getElementById("modLoadReveal").style.display = "none"
    document.getElementById("modloaddiv").style.display = "none"
  
    musicBox = document.getElementById("music_player")
    musicBox.style.display = ""
  
    var trackSel;
    e = campaignTrail_temp
    e.selectedSoundtrack = 0
  
    toTime = (seconds) => {
        var date = new Date(null);
        date.setSeconds(seconds);
        return date.toISOString().substr(11, 8);
    }
  
    generateTime = () => {
        // Get the audio element
        var audio = document.getElementById("campaigntrailmusic");
  
        timeTracker = document.createElement("div");
        timeTracker.style = `
  text-align:left;
  border-style:solid;
  border-width:3px;
  height:150px;
  width:200px;
  background-color:#999999;
  float:right;
  padding: 10px;
  `
        $("#trackSelParent")[0].prepend(timeTracker);
        $("#trackSelParent")[0].prepend(document.createElement("br"));
  
        // Create a new element to display the current position of the audio
        var positionDisplay = document.createElement("gg");
        positionDisplay.id = "position-display";
  
        // Create a new slider element to change the time
        var timeSlider = document.createElement("input");
        timeSlider.type = "range";
        timeSlider.min = 0;
        timeSlider.max = 1;
        timeSlider.step = 0.001;
        timeSlider.value = 0;
        timeSlider.style.width = "200px";
        timeSlider.id = "time-slider";
  
        var pausePlay = document.createElement("button");
        pausePlay.id = "position-display";
        pausePlay.innerHTML = "<b>Pause</b>"
        pausePlay.style.width = "100%";
  
  
        pausePlay.addEventListener("click", event => {
            event.preventDefault();
            updatePositionDisplay();
            let audio = document.getElementById("campaigntrailmusic");
            if (audio.paused) {
                audio.play();
                event.target.innerHTML = "<b>Pause</b>";
                return;
            }
            audio.pause();
            event.target.innerHTML = "<b>Play</b>";
            return;
        })
  
        var volumeLabel = document.createElement("gg");
        volumeLabel.id = "volume-label";
        volumeLabel.innerHTML = "<br><b>Volume: </b>"
  
        var volumeSlider = document.createElement("input");
        volumeSlider.type = "range";
        volumeSlider.min = 0;
        volumeSlider.max = 1;
        volumeSlider.step = 0.001;
        volumeSlider.value = 0;
        volumeSlider.style.width = "200px";
        volumeSlider.id = "volume-slider";
  
        volumeSlider.value = audio.volume;
  
        timeTracker.appendChild(pausePlay);
        timeTracker.appendChild(document.createElement("br"));
        timeTracker.appendChild(document.createElement("br"));
        timeTracker.appendChild(positionDisplay);
        timeTracker.appendChild(timeSlider);
        timeTracker.appendChild(volumeLabel);
        timeTracker.appendChild(volumeSlider);
  
        updatePositionDisplay();
  
        //for (let i = 0; i < 10; i++)
        //timeTracker.append(document.createElement("br"));
  
  
        // Function to update the position display
        function updatePositionDisplay() {
            positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
            timeSlider.value = audio.duration ? audio.currentTime / audio.duration : 0;
        }
  
        // Function to change the time of the audio
        function changeTime() {
            positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
            audio.currentTime = timeSlider.value * audio.duration;
        }
  
        updateVolume = event => {
            audio.volume = event.target.value;
        }
  
        // Update the position display and slider every second
        setInterval(updatePositionDisplay, 1000);
  
        // Listen for changes to the time slider and change the time of the audio
        timeSlider.addEventListener("input", changeTime);
        volumeSlider.addEventListener("input", updateVolume)
    }
  
    function newMusicPlayer() {
        trackSel = document.createElement("div");
        trackSel.id = "trackSelParent"
        let z = `<br><br><br><br><br><br><br><br><br><br><div id='trackSel' style="text-align:left;border-style:solid;border-width:3px;overflow-y: scroll;overflow-x: hidden;height:200px; width:400px;background-color:#999999;float:right;">`
        z += `<b><select id='selectSoundtrack'><option value='` + soundtracks[e.selectedSoundtrack].name + `'>` + soundtracks[e.selectedSoundtrack].name + "</option>"
        for (i in soundtracks) {
            if (soundtracks[e.selectedSoundtrack] != soundtracks[i]) {
                z += `<option value='` + soundtracks[i].name + `'>` + soundtracks[i].name + `</option>`
            }
        }
        z += `</select></b><br><br>`
            // <label><input type="radio" name="option" value="option1">Option 1</label><br>
        for (i in soundtracks[e.selectedSoundtrack].tracklist) {
            let a = soundtracks[e.selectedSoundtrack].tracklist[i]
            let b = `<label><input class="trackSelector" type="radio" name="trackSelector" value="` + i + `">` + a.name + `</label><br>`
            z += b
        }
        z += "</div><br><br>"
        trackSel.innerHTML = z
  
        // select correct song
  
        musicBox.appendChild(trackSel);
        Array.from(document.getElementById("trackSel").children).filter(f => {
            return f.tagName == "LABEL"
        }).map(f => f.children[0])[0].checked = true
  
        // set soundtrack changer
  
        soundtrackSelector = document.getElementById("selectSoundtrack")
        soundtrackSelector.onchange = function() {
            for (i in soundtracks) {
                if (soundtracks[i].name == soundtrackSelector.value) {
                    e.selectedSoundtrack = i
                    break
                }
            }
            document.getElementById("trackSelParent").remove()
            newMusicPlayer()
        }
  
        var matches = document.querySelectorAll('.trackSelector');
  
        for (match in matches) {
            matches[match].onchange = function() {
                audio = $("#campaigntrailmusic")[0];
                audio.src = soundtracks[e.selectedSoundtrack].tracklist[this.value].url
                audio.currentTime = 0
            }
        }
  
        musicBox.children[2].loop = false
        musicBox.children[2].src = soundtracks[e.selectedSoundtrack].tracklist[0].url
  
        musicBox.children[2].onended = function() {
            console.log("next track")
            let selected = Number(document.querySelector('input[name="trackSelector"]:checked').value);
            let newSel = clamp(selected + 1, soundtracks[e.selectedSoundtrack].tracklist.length - 1, 0)
            let buttons = Array.from(document.getElementById("trackSel").children).filter(f => {
                    return f.tagName == "LABEL"
                }).map(f => f.children[0])
                //let selectedIndex = buttons.map(f=>f.children[0]).map(f=>f.checked)
            buttons[newSel].click()
        }
  
        for (w = 0; w < 7; w++) {
            document.getElementById("trackSelParent").appendChild(document.createElement("br"))
        }
  
        generateTime();
    }
  
    clamp = function(a, max, min, overflow = true) {
        if (overflow) {
            return a > max ? min : a < min ? max : a;
        }
        return a > max ? max : a < min ? min : a;
    }
  
  
    // Track list
  
    var soundtracks = {
        0: {
            name: "Providence",
            tracklist: [
			  {
                "name": "Hail Columbia",
                "url": "https://audio.jukehost.co.uk/rMyyR4s4DlLmRQO9RXiqspCQMImHodS5"
              },
			  {
                "name": "My Country Tis of Thee",
                "url": "https://audio.jukehost.co.uk/sHfxMLLzaa95YqKF3k2yEs4rhJKYLFOP"
              },
			  {
                "name": "Battle Hymn of the Republic",
                "url": "https://audio.jukehost.co.uk/c1RRA1zG8yYdCgJjULI7wvS4vI8BnSOj"
              },
			  {
                "name": "Hearts of Oak",
                "url": "https://audio.jukehost.co.uk/vke0j6a1lxdTW2PG9f3X8Lmu8Et7nouk"
              },
			  {
                "name": "The Logger\'s Boast",
                "url": "https://audio.jukehost.co.uk/nVqfAiTpJs6lBcjvg21tB3soZsFiRl7y"
              },
			  {
                "name": "Cape Anne",
                "url": "https://audio.jukehost.co.uk/BbYCfJJNLlYKHZpUkEVCuQPWImIegyVe"
              }
          ]
        },
		1: {
            name: "Campbell’s Service",
            tracklist: [
			  {
                "name": "Holy, Holy, Holy",
                "url": "https://audio.jukehost.co.uk/HWSQg8IJo76xf1JwwAnQ2f5zbwRZEiKH"
              },
			  {
                "name": "My Faith Looks Up to Thee",
                "url": "https://audio.jukehost.co.uk/WTPo084ANES4L3ZcAnu8sRqiqRGzXNJs"
              },
			  {
                "name": "I Love thy Kingdom, Lord",
                "url": "https://audio.jukehost.co.uk/vaj6l2PHKFZimbPXeJwQPfyhfMtAbKm0"
              },
			  {
                "name": "Rock of Ages",
                "url": "https://audio.jukehost.co.uk/bMHWXhzIdXXhZsXop4VuPv0AfU2DLhyh"
              },
			  {
                "name": "Shall We Gather at the River",
                "url": "https://audio.jukehost.co.uk/9deNabsWUQBSHyp5d4VKx4jqKarKXmsh"
              }
			  ]
        },
		2: {
            name: "Coding Jams",
            tracklist: [
			  {
                "name": "(MAX) A Lady - Tally Hall",
                "url": "https://audio.jukehost.co.uk/nh5lZZiwOInuO3ToeBE1nEYCXV2NGBbG"
              },
			  {
                "name": "(MAX) Mo Ghile Mear - Órla Fallon",
                "url": "https://audio.jukehost.co.uk/op38wj6Cw4Kny0c6RxuGSvKYuUrDasdL"
              },
			  {
                "name": "(MAX) Óró Sé Do Bheatha Bhaile - Derek Warfield & The Young Wolfe Tones",
                "url": "https://audio.jukehost.co.uk/yNBZuec78CHGKK2TkKrbr4PwbWn8JsFz"
              },
			   {
                "name": "(MAX) Viva la Quinte Brigada - Christy Moore",
                "url": "https://audio.jukehost.co.uk/ZkXKKVLmeRr6DAFeEjmfBBPc4avIQpHC"
              },
			  {
                "name": "(ANA) Everlong - Foo Fighters",
                "url": "https://audio.jukehost.co.uk/zG0mFFPj9I4iMRcyixjCvd6re6XzWemV"
              },
			  {
                "name": "(ANA) Lovefool - The Cardigans",
                "url": "https://audio.jukehost.co.uk/VRhXEVPDa3Qn5LmttBAjpaCCxtZByeRQ"
              },
			  {
                "name": "(ANA) What Deaner Was Talkin\' About - Ween",
                "url": "https://audio.jukehost.co.uk/J5Cp9euz9wbrEvFTGEF24j7n6WKLPloh"
              },
			  {
                "name": "(ANA) Tamacún - Rodrigo y Gabriela?",
                "url": "https://audio.jukehost.co.uk/mV7p59sRaRO5XgwLbeoQQx3UJbTiNFqW"
              },
			  {
                "name": "(MARS) This Must Be The Place (Naive Melody) - The Talking Heads",
                "url": "https://audio.jukehost.co.uk/ocG55UFM3qBSRZkb3sU9ciKasuiUCHLN"
              },
			  {
                "name": "(MARS) ketamine - siouxxie sixxsta",
                "url": "https://audio.jukehost.co.uk/rydBlOnGYBrWUJQ6es706IK4Dw1uJqKx"
              },
			  {
                "name": "(MARS) Puff Daddy - jpegmafia",
                "url": "https://audio.jukehost.co.uk/F1vIc3SFfrA06eRFgp06xBW3QvvdZ1Lo"
              },
			  {
                "name": "(MARS) COOL_DNB_SONG - 8485",
                "url": "https://audio.jukehost.co.uk/U9wdkyTGcWkDRIZypUvByrpkRc3y6j2x"
              }
			  ]
        }
    }
  
    // Set up new music player
	if (!hasMusic) {
		newMusicPlayer()
		hasMusic = true;
	}
  }

//#endcode
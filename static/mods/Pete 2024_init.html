campaignTrail_temp.election_json = [
    {
        "model": "campaign_trail.election",
        "pk": 20,
        "fields": {
            "year": 2020,
            "display_year": "Pete 2024",
            "summary": "Upended by assassination attempts, wars, and economic crises, the 2024 election’s greatest upheaval came from something crushingly ordinary: age. With Joe Biden lurching into the role of King Lear, watched over by his obsessively controlling advisors, the Democratic Party tore itself apart in search of a successor. Over the course of a rushed primary season condensed into a matter of weeks, not months, the lamest of candidates was selected: Pete Buttigieg.<br><br>The white bread former dog-catcher and current bus driver defeated the first Black and first woman Vice President in history, ensuring the glass ceiling would hold for another four years, and crashing the electorate’s hopes in the process. Buffeted by Trump’s hourly ramblings and a Democratic Party in disrepair, few genuinely believe Buttigieg has a real shot at the presidency, and even less have faith in his technocratic utopian vision of America. To win, the boy mayor will have to gain the support of the tens of millions who have long tuned out of politics, and craft a decisive disillusioned majority.",
            "image_url": "https://i.imgur.com/XDBzRL3.gif",
            "winning_electoral_vote_number": 270,
            "advisor_url": "https://i.imgur.com/J8xWBrx.jpeg",
            "recommended_reading": "<a href=\"https://readsettlers.org/\" target=\\u201d_blank\\u201d>NAFO memes</a>",
            "has_visits": 1,
            "no_electoral_majority_image": "../static/images/2012-no-majority.jpg"
        }
    }
]
campaignTrail_temp.temp_election_list = [
    {
        "id": 20,
        "year": 2020,
        "is_premium": 0,
        "display_year": "Pete 2024"
    }
]

campaignTrail_temp.credits = "obummer and cta, with help from friends"



campaignTrail_temp.global_parameter_json = [
    {
        "model": "campaign_trail.global_parameter",
        "pk": 1,
        "fields": {
            "vote_variable": 1.125,
            "max_swing": 0.12,
            "start_point": 0.94,
            "candidate_issue_weight": 15,
            "running_mate_issue_weight": 5,
            "issue_stance_1_max": -0.71,
            "issue_stance_2_max": -0.3,
            "issue_stance_3_max": -0.125,
            "issue_stance_4_max": 0.125,
            "issue_stance_5_max": 0.3,
            "issue_stance_6_max": 0.71,
            "global_variance": 0.00001,
            "state_variance": 0.000001,
            "question_count": 25,
            "default_map_color_hex": "#C9C9C9",
            "no_state_map_color_hex": "#999999"
        }
    }
]

campaignTrail_temp.candidate_json = [
    {
        "model": "campaign_trail.candidate",
        "pk": 81,
        "fields": {
            "first_name": "Pete",
            "last_name": "Buttigieg",
            "election": 20,
            "party": "Democratic",
            "state": "Michigan",
            "priority": 1,
            "description": "The moment Pete Buttigieg won the presidential nomination, under the most unlikely of circumstances, the Democratic Party descended on him. Not the voters who can make or break his future. But the grifter class. The gossipy anonymous donors, the boutique consultancy firms. The operatives who sell their wisdom to the media, who never bother to ask whether they’ve won an election in their viewers’ lifetimes. Buttigieg may prefer to focus on his background as a small town mayor, or the historic quality of his candidacy given his marriage to Chasten, or even what he’s accomplished in taking on the airlines.<br><br>But none of that matters.<br><br>If Buttigieg fails to jettison the jabbering in his ears, this will have been for nothing, and this unusual standard bearer will go down like the other usual ones, paving the primrose path to an emboldened second Trump administration.",
            "color_hex": "#24458C",
            "secondary_color_hex": null,
            "is_active": 1,
            "image_url": "https://i.imgur.com/ajKrnIm.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 82,
        "fields": {
            "first_name": "Donald",
            "last_name": "Trump",
            "election": 20,
            "party": "Republican",
            "state": "Florida",
            "priority": 1,
            "description": "<p>xoxo</p>",
            "color_hex": "#720F00",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://i.imgur.com/aU8bxaF.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": "<p>This is a running mate description it only shows for running mates</p>",
            "candidate_score": 1,
            "running_mate": false
        }
    },
    // Democratic VPs
    {
        "model": "campaign_trail.candidate",
        "pk": 810,
        "fields": {
            "first_name": "Gina",
            "last_name": "Raimondo",
            "election": 20,
            "party": "Democratic",
            "state": "Rhode Island",
            "priority": 1,
            "description": "<p>Put description here</p>",
            "color_hex": "#0000FF",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://i.imgur.com/GrmXJH6.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": "Governor of a tiny and irrelevant solid blue state? Secretary of Commerce at a time when vast majorities of voters are outraged at the state of the economy and will vote based on that? Serving in the cabinet and publicly vouching for a man who was plainly too old to serve? Gina Raimondo is perfect!<br><br>The dull technocratic Commerce Secretary utterly fails to excite anyone outside K Street, but she isn’t aiming for middle America, she’s aiming to govern. Selecting her would not help Buttigieg in any way with flipping Trump supporters or coaxing the Democratic base to get to the voting booths. Instead her pick would project confidence, showing Pete is aiming for a governing majority, someone who he’s worked with before and will work with again to implement his common sense liberal vision.",
            "candidate_score": 1,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 811,
        "fields": {
            "first_name": "Ro",
            "last_name": "Khanna",
            "election": 20,
            "party": "Democratic",
            "state": "California",
            "priority": 1,
            "description": "<p>Put description here</p>",
            "color_hex": "#0000FF",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://i.imgur.com/LAFbAyK.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": "Hailing from rock-solid blue California and making little national press outside Politico readers’ timelines, on paper, Ro Khanna brings nothing to the ticket. But in the real world, he also brings nothing to the ticket. <br><br>With the Squad standing by Biden long after everyone else had fled for the hills, there is little any public Biden defender needs to do to win over progressive members of Congress, and Khanna is a case in point. He doesn’t command a vast base of millions of fervent supporters like Bernie does at rallies or AOC does online. But Khanna’s base is influential, and most importantly, very very rich. He’s perhaps the only man in Congress who’s on record loudly supporting Medicare for All, and who could potentially bring the tech elite like Elon Musk back into the Democratic tent. But above all, he’s one of the few people willing to say yes to joining this ticket.",
            "candidate_score": 1,
            "running_mate": true
        }
    },
    // Republican VPs
    {
        "model": "campaign_trail.candidate",
        "pk": 820,
        "fields": {
            "first_name": "No",
            "last_name": "One",
            "election": 20,
            "party": "Republican",
            "state": "Deep State",
            "priority": 1,
            "description": "<p>Put description here</p>",
            "color_hex": "#0000FF",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/candidateexample.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": "<p>X</p>",
            "candidate_score": 1,
            "running_mate": true
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 83,
        "fields": {
            "first_name": "Robert",
            "last_name": "Kennedy Jr.",
            "election": 20,
            "party": "Independent",
            "state": "California",
            "priority": 1,
            "description": "<p>Not playable</p>",
            "color_hex": "#48496E",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/candidateexample.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 84,
        "fields": {
            "first_name": "Jill",
            "last_name": "Stein",
            "election": 20,
            "party": "Green",
            "state": "Massachusetts",
            "priority": 1,
            "description": "<p>Not playable</p>",
            "color_hex": "#5e8f5d",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/candidateexample.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
        "model": "campaign_trail.candidate",
        "pk": 85,
        "fields": {
            "first_name": "Chase",
            "last_name": "Oliver",
            "election": 20,
            "party": "Libertarian",
            "state": "Georgia",
            "priority": 1,
            "description": "<p>Not playable</p>",
            "color_hex": "#ccb158",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://www.jetsimon.com/public/candidateexample.png",
            "electoral_victory_message": "This guy wins!",
            "electoral_loss_message": "This guy loses!",
            "no_electoral_majority_message": "We all win?",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    }
]

campaignTrail_temp.running_mate_json = [
    {
        "model": "campaign_trail.running_mate",
        "pk": 81947,
        "fields": {
            "candidate": 81,
            "running_mate": 810
        }
    },
        {
        "model": "campaign_trail.running_mate",
        "pk": 81948,
        "fields": {
            "candidate": 81,
            "running_mate": 811
        }
    }
]

campaignTrail_temp.opponents_default_json = [
    {
        "election": 20,
        "candidates": [
            81,
            82,
            83,
            84,
            85
        ]
    }
]

campaignTrail_temp.opponents_weighted_json = [
    {
        "election": 20,
        "candidates": [
            81,
            82,
            83,
            84,
            85
        ]
    }
]

campaignTrail_temp.modBoxTheme = {
  "header_color": "#2D4443",
  "header_image_url": "https://i.imgur.com/uk6sm0X.png",
  "header_text_color": "#F2E4D6",
  "description_text_color": "#000000",
  "description_background_color": "#BFC8C9",
  "main_color": "#475668",
  "secondary_color": "#63789D",
  "ui_text_color": "#F2E4D6"
}

nct_stuff.themes[nct_stuff.selectedTheme].coloring_title = "#5c6e6f"; 
nct_stuff.themes[nct_stuff.selectedTheme].coloring_window = "#475668";
let gameWindow = document.querySelector("#game_window");
if (gameWindow) gameWindow.style.backgroundColor = nct_stuff.themes[nct_stuff.selectedTheme].coloring_window;
$(".container")[0].style.background = "linear-gradient(to top, #3a506b, #7084ad 50%, #c9d4de)";
document.body.style.background = "url('https://i.imgur.com/96FVh61.png') no-repeat center center";
document.body.style.backgroundSize = "cover";
document.body.style.backgroundAttachment = "fixed";
document.getElementById("header").src = "https://i.imgur.com/tVKTiXn.gif";
document.getElementById("wittyquote").style.color = "#025786"; 
nct_stuff.themes[nct_stuff.selectedTheme].text_col = "#ffffff";
document.head.innerHTML += "<style>#results_container {color:#ffffff;} .inner_window_w_desc {background-color:#8da6a6 !important;}</style>";

quotes = [""];
customquote = quotes[Math.floor((Math.random() * quotes.length))];

corrr = `
  <h2 style="color: #f2e4d6; font-style: normal;">
    Pete 2024
  </h2>
`;

// Function to detect candidate image and update the header
function updateHeaderBasedOnCandidate() {
  const candidateImage = document.querySelector("#candidate_image img");
  const headerImage = document.getElementById("header");

  if (candidateImage) {
    const imageSrc = candidateImage.src;

    if (imageSrc.includes("jEo3VDX.png")) { // Pete
      headerImage.src = "https://i.imgur.com/tVKTiXn.gif";
      document.body.style.background = "url('https://i.imgur.com/96FVh61.png') no-repeat center center";
      document.body.style.backgroundSize = "cover";
document.body.style.backgroundAttachment = "fixed";
      
    } else if (imageSrc.includes("aU8bxaF.png")) { // Trump
      headerImage.src = "https://i.imgur.com/69DWi3F.gif";
      document.body.style.background = "url('https://i.imgur.com/4fkOJVN.jpeg') no-repeat center center";
      document.body.style.backgroundSize = "cover";
document.body.style.backgroundAttachment = "fixed";
    }
    
  }
}

// Run the function initially to set the correct header
document.addEventListener("click", () => {
  updateHeaderBasedOnCandidate();
});


  
musicMode = () => {
  // Initialise custom music

  $("#music_player")[0].children[0].style.display = "none"
  $("#music_player")[0].children[1].style.display = "none"

  document.getElementById("modLoadReveal").style.display = "none"
  document.getElementById("modloaddiv").style.display = "none"

  musicBox = document.getElementById("music_player")
  musicBox.style.display = ""

  var trackSel;
  e = campaignTrail_temp
  e.selectedSoundtrack = 0

  toTime = (seconds) => {
      var date = new Date(null);
      date.setSeconds(seconds);
      return date.toISOString().substr(11, 8);
  }

  generateTime = () => {
      // Get the audio element
      var audio = document.getElementById("campaigntrailmusic");

      timeTracker = document.createElement("div");
      timeTracker.style = `
text-align:left;
border-style:solid;
border-width:3px;
height:150px;
width:200px;
background-color:#999999;
float:right;
padding: 10px;
`
      $("#trackSelParent")[0].prepend(timeTracker);
      $("#trackSelParent")[0].prepend(document.createElement("br"));

      // Create a new element to display the current position of the audio
      var positionDisplay = document.createElement("gg");
      positionDisplay.id = "position-display";

      // Create a new slider element to change the time
      var timeSlider = document.createElement("input");
      timeSlider.type = "range";
      timeSlider.min = 0;
      timeSlider.max = 1;
      timeSlider.step = 0.001;
      timeSlider.value = 0;
      timeSlider.style.width = "200px";
      timeSlider.id = "time-slider";

      var pausePlay = document.createElement("button");
      pausePlay.id = "position-display";
      pausePlay.innerHTML = "<b>Pause</b>"
      pausePlay.style.width = "100%";


      pausePlay.addEventListener("click", event => {
          event.preventDefault();
          updatePositionDisplay();
          let audio = document.getElementById("campaigntrailmusic");
          if (audio.paused) {
              audio.play();
              event.target.innerHTML = "<b>Pause</b>";
              return;
          }
          audio.pause();
          event.target.innerHTML = "<b>Play</b>";
          return;
      })

      var volumeLabel = document.createElement("gg");
      volumeLabel.id = "volume-label";
      volumeLabel.innerHTML = "<br><b>Volume: </b>"

      var volumeSlider = document.createElement("input");
      volumeSlider.type = "range";
      volumeSlider.min = 0;
      volumeSlider.max = 1;
      volumeSlider.step = 0.001;
      volumeSlider.value = 0;
      volumeSlider.style.width = "200px";
      volumeSlider.id = "volume-slider";

      volumeSlider.value = audio.volume;

      timeTracker.appendChild(pausePlay);
      timeTracker.appendChild(document.createElement("br"));
      timeTracker.appendChild(document.createElement("br"));
      timeTracker.appendChild(positionDisplay);
      timeTracker.appendChild(timeSlider);
      timeTracker.appendChild(volumeLabel);
      timeTracker.appendChild(volumeSlider);

      updatePositionDisplay();

      //for (let i = 0; i < 10; i++)
      //timeTracker.append(document.createElement("br"));


      // Function to update the position display
      function updatePositionDisplay() {
          positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
          timeSlider.value = audio.duration ? audio.currentTime / audio.duration : 0;
      }

      // Function to change the time of the audio
      function changeTime() {
          positionDisplay.innerHTML = "<b>Time:</b> " + toTime(audio.currentTime) + "<br>";
          audio.currentTime = timeSlider.value * audio.duration;
      }

      updateVolume = event => {
          audio.volume = event.target.value;
      }

      // Update the position display and slider every second
      setInterval(updatePositionDisplay, 1000);

      // Listen for changes to the time slider and change the time of the audio
      timeSlider.addEventListener("input", changeTime);
      volumeSlider.addEventListener("input", updateVolume)
  }

  function newMusicPlayer() {
      trackSel = document.createElement("div");
      trackSel.id = "trackSelParent"
      let z = `<br><br><br><br><br><br><br><br><br><br><div id='trackSel' style="text-align:left;border-style:solid;border-width:3px;overflow-y: scroll;overflow-x: hidden;height:200px; width:400px;background-color:#999999;float:right;">`
      z += `<b><select id='selectSoundtrack'><option value='` + soundtracks[e.selectedSoundtrack].name + `'>` + soundtracks[e.selectedSoundtrack].name + "</option>"
      for (i in soundtracks) {
          if (soundtracks[e.selectedSoundtrack] != soundtracks[i]) {
              z += `<option value='` + soundtracks[i].name + `'>` + soundtracks[i].name + `</option>`
          }
      }
      z += `</select></b><br><br>`
          // <label><input type="radio" name="option" value="option1">Option 1</label><br>
      for (i in soundtracks[e.selectedSoundtrack].tracklist) {
          let a = soundtracks[e.selectedSoundtrack].tracklist[i]
          let b = `<label><input class="trackSelector" type="radio" name="trackSelector" value="` + i + `">` + a.name + `</label><br>`
          z += b
      }
      z += "</div><br><br>"
      trackSel.innerHTML = z

      // select correct song

      musicBox.appendChild(trackSel);
      Array.from(document.getElementById("trackSel").children).filter(f => {
          return f.tagName == "LABEL"
      }).map(f => f.children[0])[0].checked = true

      // set soundtrack changer

      soundtrackSelector = document.getElementById("selectSoundtrack")
      soundtrackSelector.onchange = function() {
          for (i in soundtracks) {
              if (soundtracks[i].name == soundtrackSelector.value) {
                  e.selectedSoundtrack = i
                  break
              }
          }
          document.getElementById("trackSelParent").remove()
          newMusicPlayer()
      }

      var matches = document.querySelectorAll('.trackSelector');

      for (match in matches) {
          matches[match].onchange = function() {
              audio = $("#campaigntrailmusic")[0];
              audio.src = soundtracks[e.selectedSoundtrack].tracklist[this.value].url
              audio.currentTime = 0
          }
      }

      musicBox.children[2].loop = false
      musicBox.children[2].src = soundtracks[e.selectedSoundtrack].tracklist[0].url

      musicBox.children[2].onended = function() {
          console.log("next track")
          let selected = Number(document.querySelector('input[name="trackSelector"]:checked').value);
          let newSel = clamp(selected + 1, soundtracks[e.selectedSoundtrack].tracklist.length - 1, 0)
          let buttons = Array.from(document.getElementById("trackSel").children).filter(f => {
                  return f.tagName == "LABEL"
              }).map(f => f.children[0])
              //let selectedIndex = buttons.map(f=>f.children[0]).map(f=>f.checked)
          buttons[newSel].click()
      }

      for (w = 0; w < 7; w++) {
          document.getElementById("trackSelParent").appendChild(document.createElement("br"))
      }

      generateTime();
  }

  clamp = function(a, max, min, overflow = true) {
      if (overflow) {
          return a > max ? min : a < min ? max : a;
      }
      return a > max ? max : a < min ? min : a;
  }

// Define the soundtracks and track list

campaignTrail_temp.achievements = {
  "juggjuggjugg<br>" : {
    "image" : "https://i.imgur.com/VxJeI7y.png",
    "description" : "Unlock the High Vibes + Victory Ending",
    "cannotBeCheated" : true
  },
  "Next Up<br>" : {
    "image" : "https://i.imgur.com/yGx4kuH.png",
    "description" : "Unlock the High Vibes Secret Ending",
    "cannotBeCheated" : true
  }
}

var soundtracks = {
    0: {
        name: "Soundtrack",
        tracklist: [
          {
            "name": "Drab Majesty - A Dialogue",
            "url": "https://audio.jukehost.co.uk/eFdGvsiFejyFFWmCsxurTGACEFBdESFX"
          },
          {
            "name": "Nine Inch Nails - La Mer",
            "url": "https://audio.jukehost.co.uk/eT2XBWc9sYfCEP3675SIDif9WTpkFpXB"
          },
          {
            "name": "Trans Am - I Hear Fake Voices",
            "url": "https://audio.jukehost.co.uk/0MhEUa7MiTiFF6p5IhSRYbbdeCyp1vmP"
          },
          {
            "name": "Title Fight - Head In The Ceiling Fan",
            "url": "https://audio.jukehost.co.uk/FV4JW31J5x8vVeWcgl1h5JychRnnNQJd"
          },
      ]
    }
};

    // Set up new music player
  
    newMusicPlayer()
  }

  musicMode()

  setMusic = (url, override = false) => {
    let aud;
    if ($("#music_player")[0]) {
      $("#music_player")[0].remove();
    } 
    if (override && document.getElementById("endingAudio")) {
      aud = document.getElementById("endingAudio");
      aud.src = url;
      aud.play();
      return 0;
    }
    if (document.getElementById("endingAudio")) {
      return 0;
    }
    aud = document.createElement("audio");
    aud.id = "endingAudio";
    aud.src = url;
    aud.loop = true;
    aud.autoplay = true;
    document.body.appendChild(aud);
    aud.play();
    return 0;
  }
  e.collect_results = true; 

  async function appendStyle() {
    var metaTag = document.createElement('meta');
    metaTag.name = "viewport";
    metaTag.content = "width=device-width, initial-scale=1";
    document.getElementsByTagName('head')[0].appendChild(metaTag);

    if (!document.querySelector('#radio-option-style')) {
        let style = document.createElement('style');
        style.type = 'text/css';
        style.id = 'radio-option-style';
        style.innerHTML = `
        h3 {
            font-size: 1.08em !important;
            line-height: 17px;
        }
        input {
            font-size: 0.9em !important; 
            line-height: 17px; 
        }

        #visit_window {
            height: auto;
        }
        #visit_content {
            height: 79%;
        }

        .person_button {
            margin-top: 0.2em;
        }

        @media only screen and (max-width: 768px) {
            #inner_window_2,
            #inner_window_3,
            #inner_window_4 {
                overflow: auto;
            }
            #visit_window {
                font-size: 1.8em;
                width: 90%;
                left: 5%;
            }
            .inner_window_question button,
            #visit_window button,
            #map_footer {
                line-height: 2.5em;
            }
            #drop_down_area_state {
                margin-left: auto;
                margin-right: auto;
            }
        }
        `;
        document.head.appendChild(style);
    }
}
appendStyle();


var invisibleElement = document.createElement('div');
invisibleElement.style.display = 'none';
invisibleElement.id = 'my-invisible-element';
document.body.appendChild(invisibleElement);